{"version":3,"file":"tree-grid-sort.component.js","sourceRoot":"","sources":["../../../../../../.ng_build/theme/components/tree-grid/tree-grid-sort.component.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  Component,\n  ContentChild,\n  Directive,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Inject,\n  Input,\n  Output,\n  TemplateRef,\n} from '@angular/core';\n\nimport { convertToBoolProperty, NbBooleanInput, NbNullableInput } from '../helpers';\nimport { NB_SORT_HEADER_COLUMN_DEF } from '../cdk/table/cell';\n\n/** Column definition associated with a `NbSortHeaderDirective`. */\ninterface NbSortHeaderColumnDef {\n  name: string;\n}\n\nexport interface NbSortRequest {\n  column: string;\n  direction: NbSortDirection;\n}\n\nexport interface NbSortable {\n  sort(sortRequest: NbSortRequest);\n}\n\nexport type NbSortDirectionValues = 'asc' | 'desc' | '';\nexport enum NbSortDirection {\n  ASCENDING = 'asc',\n  DESCENDING = 'desc',\n  NONE = '',\n}\nconst sortDirections: NbSortDirection[] = [\n  NbSortDirection.ASCENDING,\n  NbSortDirection.DESCENDING,\n  NbSortDirection.NONE,\n];\n\n/**\n * Directive triggers sort method of passed object when sort header changes direction\n */\n@Directive({ selector: '[nbSort]' })\nexport class NbSortDirective {\n  @Input('nbSort') sortable: NbSortable;\n  static ngAcceptInputType_sortable: NbSortable | NbNullableInput;\n\n  @Output() sort: EventEmitter<NbSortRequest> = new EventEmitter<NbSortRequest>();\n\n  emitSort(sortRequest: NbSortRequest) {\n    if (this.sortable && this.sortable.sort) {\n      this.sortable.sort(sortRequest);\n    }\n    this.sort.emit(sortRequest);\n  }\n}\n\nexport interface NbSortHeaderIconDirectiveContext {\n  $implicit: NbSortDirection;\n  isAscending: boolean;\n  isDescending: boolean;\n  isNone: boolean;\n}\n\n/**\n * Directive for headers sort icons. Mark you icon implementation with this structural directive and\n * it'll set template's implicit context with current direction. Context also has `isAscending`,\n * `isDescending` and `isNone` properties.\n */\n@Directive({ selector: '[nbSortHeaderIcon]' })\nexport class NbSortHeaderIconDirective {}\n\n@Component({\n  selector: 'nb-sort-icon',\n  template: `\n    <ng-container *ngIf=\"isDirectionSet()\">\n      <nb-icon *ngIf=\"isAscending()\" icon=\"chevron-down-outline\" pack=\"nebular-essentials\" aria-hidden=\"true\"></nb-icon>\n      <nb-icon *ngIf=\"isDescending()\" icon=\"chevron-up-outline\" pack=\"nebular-essentials\" aria-hidden=\"true\"></nb-icon>\n    </ng-container>\n  `,\n})\nexport class NbSortIconComponent {\n  @Input() direction: NbSortDirection = NbSortDirection.NONE;\n\n  isAscending(): boolean {\n    return this.direction === NbSortDirection.ASCENDING;\n  }\n\n  isDescending(): boolean {\n    return this.direction === NbSortDirection.DESCENDING;\n  }\n\n  isDirectionSet(): boolean {\n    return this.isAscending() || this.isDescending();\n  }\n}\n\n/**\n * Marks header as sort header so it emitting sort event when clicked.\n */\n@Component({\n  selector: '[nbSortHeader]',\n  template: `\n    <button\n      class=\"nb-tree-grid-header-change-sort-button\"\n      type=\"button\"\n      [attr.disabled]=\"getDisabledAttributeValue()\"\n      (click)=\"sortData()\">\n      <ng-content></ng-content>\n    </button>\n    <nb-sort-icon *ngIf=\"!sortIcon; else customIcon\" [direction]=\"direction\"></nb-sort-icon>\n    <ng-template #customIcon [ngTemplateOutlet]=\"sortIcon\" [ngTemplateOutletContext]=\"getIconContext()\"></ng-template>\n  `,\n})\nexport class NbSortHeaderComponent {\n\n  @ContentChild(NbSortHeaderIconDirective, { read: TemplateRef })\n  sortIcon: TemplateRef<NbSortHeaderIconDirectiveContext>;\n\n  /**\n   * Current sort direction. Possible values: `asc`, `desc`, ``(none)\n   * @type {NbSortDirection}\n   */\n  @Input('nbSortHeader') direction: NbSortDirection;\n  static ngAcceptInputType_direction: NbSortDirectionValues;\n\n  private disabledValue: boolean = false;\n\n  /**\n   * Disable sort header\n   */\n  @Input()\n  @HostBinding('class.disabled')\n  set disabled(value) {\n    this.disabledValue = convertToBoolProperty(value);\n  }\n  get disabled(): boolean {\n    return this.disabledValue;\n  }\n  static ngAcceptInputType_disabled: NbBooleanInput;\n\n  @HostListener('click')\n  sortIfEnabled() {\n    if (!this.disabled) {\n      this.sortData();\n    }\n  }\n\n  constructor(\n    private sort: NbSortDirective,\n    @Inject(NB_SORT_HEADER_COLUMN_DEF) private columnDef: NbSortHeaderColumnDef,\n  ) {}\n\n  isAscending(): boolean {\n    return this.direction === NbSortDirection.ASCENDING;\n  }\n\n  isDescending(): boolean {\n    return this.direction === NbSortDirection.DESCENDING;\n  }\n\n  sortData(): void {\n    const sortRequest = this.createSortRequest();\n    this.sort.emitSort(sortRequest);\n  }\n\n  getIconContext(): NbSortHeaderIconDirectiveContext {\n    return {\n      $implicit: this.direction,\n      isAscending: this.isAscending(),\n      isDescending: this.isDescending(),\n      isNone: !this.isAscending() && !this.isDescending(),\n    };\n  }\n\n  getDisabledAttributeValue(): '' | null {\n    return this.disabled ? '' : null;\n  }\n\n  private createSortRequest(): NbSortRequest {\n    this.direction = this.getNextDirection();\n    return { direction: this.direction, column: this.columnDef.name };\n  }\n\n  private getNextDirection(): NbSortDirection {\n    const sortDirectionCycle = sortDirections;\n    let nextDirectionIndex = sortDirectionCycle.indexOf(this.direction) + 1;\n    if (nextDirectionIndex >= sortDirectionCycle.length) {\n      nextDirectionIndex = 0;\n    }\n    return sortDirectionCycle[nextDirectionIndex];\n  }\n}\n"]}