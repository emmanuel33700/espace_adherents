{"version":3,"file":"form-field.component.js","sourceRoot":"","sources":["../../../../../../.ng_build/theme/components/form-field/form-field.component.ts"],"names":[],"mappings":"AAAA;;;;GAIG;;AAEH,OAAO,EACL,SAAS,EACT,uBAAuB,EACvB,YAAY,EAEZ,iBAAiB,EACjB,eAAe,EACf,SAAS,EAGT,MAAM,EACN,UAAU,EACV,SAAS,GAEV,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,KAAK,EAAE,OAAO,EAAc,aAAa,EAAE,aAAa,EAAE,MAAM,MAAM,CAAC;AAChF,OAAO,EAAE,SAAS,EAAE,oBAAoB,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AAEtE,OAAO,EAAE,iBAAiB,EAAE,MAAM,oBAAoB,CAAC;AACvD,OAAO,EAAE,iBAAiB,EAAE,MAAM,oBAAoB,CAAC;AACvD,OAAO,EAAE,kBAAkB,EAAsB,wBAAwB,EAAE,MAAM,sBAAsB,CAAC;AAIxG,SAAS,+BAA+B;IACtC,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAA;AAChE,CAAC;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAkDI;AAOJ;IAcE,8BACY,EAAqB,EACrB,IAAY,EACZ,UAAsB,EACtB,QAAmB;QAJ/B,iBAMC;QALW,OAAE,GAAF,EAAE,CAAmB;QACrB,SAAI,GAAJ,IAAI,CAAQ;QACZ,eAAU,GAAV,UAAU,CAAY;QACtB,aAAQ,GAAR,QAAQ,CAAW;QAhBZ,aAAQ,GAAG,IAAI,OAAO,EAAQ,CAAC;QAExC,sBAAiB,GAAG,IAAI,aAAa,CAAqB,CAAC,CAAC,CAAC;QACvE,mBAAc,GAAyB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAjC,CAAiC,CAAC,CAAC,CAAC;QAChH,mBAAc,GAAyB,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,CAAC,EAAjC,CAAiC,CAAC,CAAC,CAAC;IAchH,CAAC;IAED,oDAAqB,GAArB;QACE,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACrB,+BAA+B,EAAE,CAAC;SACnC;IACH,CAAC;IAED,iDAAkB,GAAlB;QACE,IAAI,CAAC,iCAAiC,EAAE,CAAC;QACzC,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAChC,CAAC;IAED,8CAAe,GAAf;QAAA,iBAKC;QAJC,cAAc;QACd,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,cAAM,OAAA,UAAU,CAAC;YAC3C,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAI,CAAC,UAAU,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC;QACzE,CAAC,CAAC,EAFgC,CAEhC,CAAC,CAAC;IACN,CAAC;IAED,0CAAW,GAAX;QACE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IAED,+CAAgB,GAAhB;QACE,OAAO,IAAI,CAAC,oBAAoB,EAAE,CAAC,cAAc,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IAC5E,CAAC;IAED,+CAAgB,GAAhB;QACE,OAAO,IAAI,CAAC,oBAAoB,EAAE,CAAC,cAAc,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IAC5E,CAAC;IAES,gEAAiC,GAA3C;QAAA,iBAUC;QATO,IAAA,qBAA0D,EAAxD,wBAAS,EAAE,sBAAQ,EAAE,gBAAK,EAAE,oBAA4B,CAAC;QAEjE,aAAa,CAAC,CAAC,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;aACjD,IAAI,CACH,GAAG,CAAC,UAAC,EAAiC;gBAAhC,gBAAQ,EAAE,eAAO,EAAE,YAAI,EAAE,cAAM;YAAM,OAAA,CAAC,EAAE,QAAQ,UAAA,EAAE,OAAO,SAAA,EAAE,IAAI,MAAA,EAAE,MAAM,QAAA,EAAE,CAAC;QAArC,CAAqC,CAAC,EACjF,oBAAoB,CAAC,UAAC,QAAQ,EAAE,KAAK,IAAK,OAAA,KAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAnC,CAAmC,CAAC,EAC9E,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CACzB;aACA,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACvC,CAAC;IAES,qDAAsB,GAAhC;QAAA,iBAIC;QAHC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;aAC5C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC9B,SAAS,CAAC,cAAM,OAAA,KAAI,CAAC,EAAE,CAAC,YAAY,EAAE,EAAtB,CAAsB,CAAC,CAAC;IAC7C,CAAC;IAES,8CAAe,GAAzB,UAA0B,KAAyB,EAAE,KAAyB;QAC5E,IAAM,OAAO,GAAG;YACd,qBAAqB;YACrB,mBAAiB,KAAK,SAAI,KAAK,CAAC,IAAM;SACvC,CAAC;QAEF,IAAI,KAAK,CAAC,QAAQ,EAAE;YAClB,OAAO,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;SAC9C;aAAM,IAAI,KAAK,CAAC,OAAO,EAAE;YACxB,OAAO,CAAC,IAAI,CAAC,yBAAuB,KAAK,CAAC,MAAM,eAAY,CAAC,CAAC;SAC/D;aAAM;YACL,OAAO,CAAC,IAAI,CAAC,yBAAuB,KAAK,CAAC,MAAQ,CAAC,CAAC;SACrD;QAED,OAAO,OAAO,CAAC;IACjB,CAAC;IAES,mDAAoB,GAA9B;QACE,OAAO,IAAI,CAAC,iBAAiB,IAAI,IAAI,wBAAwB,EAAE,CAAC;IAClE,CAAC;IAES,4CAAa,GAAvB,UAAwB,QAA4B,EAAE,KAAyB;QAC7E,OAAO,QAAQ,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM;YAChC,QAAQ,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ;YACpC,QAAQ,CAAC,OAAO,KAAK,KAAK,CAAC,OAAO;YAClC,QAAQ,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,CAAC;IACtC,CAAC;IAxF0D;QAA1D,eAAe,CAAC,iBAAiB,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;kCAAS,SAAS;wDAAoB;IACrC;QAA1D,eAAe,CAAC,iBAAiB,EAAE,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;kCAAS,SAAS;wDAAoB;IAE3C;QAApD,YAAY,CAAC,kBAAkB,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;kCAAc,kBAAkB;6DAAC;IAC1B;QAA1D,YAAY,CAAC,wBAAwB,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;kCAAoB,wBAAwB;mEAAC;IAZ5F,oBAAoB;QANhC,SAAS,CAAC;YACT,QAAQ,EAAE,eAAe;YAEzB,sfAA0C;YAC1C,eAAe,EAAE,uBAAuB,CAAC,MAAM;;SAChD,CAAC;yCAgBgB,iBAAiB;YACf,MAAM;YACA,UAAU;YACZ,SAAS;OAlBpB,oBAAoB,CAiGhC;IAAD,2BAAC;CAAA,AAjGD,IAiGC;SAjGY,oBAAoB","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  ContentChild,\n  AfterContentChecked,\n  ChangeDetectorRef,\n  ContentChildren,\n  QueryList,\n  AfterContentInit,\n  OnDestroy,\n  NgZone,\n  ElementRef,\n  Renderer2,\n  AfterViewInit,\n} from '@angular/core';\nimport { merge, Subject, Observable, combineLatest, ReplaySubject } from 'rxjs';\nimport { takeUntil, distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { NbPrefixDirective } from './prefix.directive';\nimport { NbSuffixDirective } from './suffix.directive';\nimport { NbFormFieldControl, NbFormControlState, NbFormFieldControlConfig } from './form-field-control';\n\nexport type NbFormControlAddon = 'prefix' | 'suffix';\n\nfunction throwFormControlElementNotFound() {\n  throw new Error(`NbFormFieldComponent must contain [nbInput]`)\n}\n\n/*\n * NbFormFieldComponent\n *\n * @styles\n *\n * form-field-addon-basic-text-color:\n * form-field-addon-basic-highlight-text-color:\n * form-field-addon-primary-text-color:\n * form-field-addon-primary-highlight-text-color:\n * form-field-addon-success-text-color:\n * form-field-addon-success-highlight-text-color:\n * form-field-addon-info-text-color:\n * form-field-addon-info-highlight-text-color:\n * form-field-addon-warning-text-color:\n * form-field-addon-warning-highlight-text-color:\n * form-field-addon-danger-text-color:\n * form-field-addon-danger-highlight-text-color:\n * form-field-addon-control-text-color:\n * form-field-addon-control-highlight-text-color:\n * form-field-addon-disabled-text-color:\n * form-field-addon-tiny-height:\n * form-field-addon-tiny-width:\n * form-field-addon-tiny-icon-size:\n * form-field-addon-tiny-font-size:\n * form-field-addon-tiny-line-height:\n * form-field-addon-tiny-font-weight:\n * form-field-addon-small-height:\n * form-field-addon-small-width:\n * form-field-addon-small-icon-size:\n * form-field-addon-small-font-size:\n * form-field-addon-small-line-height:\n * form-field-addon-small-font-weight:\n * form-field-addon-medium-height:\n * form-field-addon-medium-width:\n * form-field-addon-medium-icon-size:\n * form-field-addon-medium-font-size:\n * form-field-addon-medium-line-height:\n * form-field-addon-medium-font-weight:\n * form-field-addon-large-height:\n * form-field-addon-large-width:\n * form-field-addon-large-icon-size:\n * form-field-addon-large-font-size:\n * form-field-addon-large-line-height:\n * form-field-addon-large-font-weight:\n * form-field-addon-giant-height:\n * form-field-addon-giant-width:\n * form-field-addon-giant-icon-size:\n * form-field-addon-giant-font-size:\n * form-field-addon-giant-line-height:\n * form-field-addon-giant-font-weight:\n **/\n@Component({\n  selector: 'nb-form-field',\n  styleUrls: ['./form-field.component.css'],\n  templateUrl: './form-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NbFormFieldComponent implements AfterContentChecked, AfterContentInit, AfterViewInit, OnDestroy {\n\n  protected readonly destroy$ = new Subject<void>();\n\n  protected formControlState$ = new ReplaySubject<NbFormControlState>(1);\n  prefixClasses$: Observable<string[]> = this.formControlState$.pipe(map(s => this.getAddonClasses('prefix', s)));\n  suffixClasses$: Observable<string[]> = this.formControlState$.pipe(map(s => this.getAddonClasses('suffix', s)));\n\n  @ContentChildren(NbPrefixDirective, { descendants: true }) prefix: QueryList<NbPrefixDirective>;\n  @ContentChildren(NbSuffixDirective, { descendants: true }) suffix: QueryList<NbSuffixDirective>;\n\n  @ContentChild(NbFormFieldControl, { static: false }) formControl: NbFormFieldControl;\n  @ContentChild(NbFormFieldControlConfig, { static: false }) formControlConfig: NbFormFieldControlConfig;\n\n  constructor(\n    protected cd: ChangeDetectorRef,\n    protected zone: NgZone,\n    protected elementRef: ElementRef,\n    protected renderer: Renderer2,\n  ) {\n  }\n\n  ngAfterContentChecked() {\n    if (!this.formControl) {\n      throwFormControlElementNotFound();\n    }\n  }\n\n  ngAfterContentInit() {\n    this.subscribeToFormControlStateChange();\n    this.subscribeToAddonChange();\n  }\n\n  ngAfterViewInit() {\n    // TODO: #2254\n    this.zone.runOutsideAngular(() => setTimeout(() => {\n      this.renderer.addClass(this.elementRef.nativeElement, 'nb-transition');\n    }));\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n  }\n\n  shouldShowPrefix(): boolean {\n    return this.getFormControlConfig().supportsPrefix && !!this.prefix.length;\n  }\n\n  shouldShowSuffix(): boolean {\n    return this.getFormControlConfig().supportsSuffix && !!this.suffix.length;\n  }\n\n  protected subscribeToFormControlStateChange() {\n    const { disabled$, focused$, size$, status$ } = this.formControl;\n\n    combineLatest([disabled$, focused$, size$, status$])\n      .pipe(\n        map(([disabled, focused, size, status]) => ({ disabled, focused, size, status })),\n        distinctUntilChanged((oldState, state) => this.isStatesEqual(oldState, state)),\n        takeUntil(this.destroy$),\n      )\n      .subscribe(this.formControlState$);\n  }\n\n  protected subscribeToAddonChange() {\n    merge(this.prefix.changes, this.suffix.changes)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => this.cd.markForCheck());\n  }\n\n  protected getAddonClasses(addon: NbFormControlAddon, state: NbFormControlState): string[] {\n    const classes = [\n      'nb-form-field-addon',\n      `nb-form-field-${addon}-${state.size}`,\n    ];\n\n    if (state.disabled) {\n      classes.push(`nb-form-field-addon-disabled`);\n    } else if (state.focused) {\n      classes.push(`nb-form-field-addon-${state.status}-highlight`);\n    } else {\n      classes.push(`nb-form-field-addon-${state.status}`);\n    }\n\n    return classes;\n  }\n\n  protected getFormControlConfig(): NbFormFieldControlConfig {\n    return this.formControlConfig || new NbFormFieldControlConfig();\n  }\n\n  protected isStatesEqual(oldState: NbFormControlState, state: NbFormControlState): boolean {\n    return oldState.status === state.status &&\n           oldState.disabled === state.disabled &&\n           oldState.focused === state.focused &&\n           oldState.size === state.size;\n  }\n}\n"]}