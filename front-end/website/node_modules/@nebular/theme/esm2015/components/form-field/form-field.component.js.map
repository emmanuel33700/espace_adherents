{"version":3,"file":"form-field.component.js","sourceRoot":"","sources":["../../../../../../.ng_build/theme/components/form-field/form-field.component.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  ContentChild,\n  AfterContentChecked,\n  ChangeDetectorRef,\n  ContentChildren,\n  QueryList,\n  AfterContentInit,\n  OnDestroy,\n  NgZone,\n  ElementRef,\n  Renderer2,\n  AfterViewInit,\n} from '@angular/core';\nimport { merge, Subject, Observable, combineLatest, ReplaySubject } from 'rxjs';\nimport { takeUntil, distinctUntilChanged, map } from 'rxjs/operators';\n\nimport { NbPrefixDirective } from './prefix.directive';\nimport { NbSuffixDirective } from './suffix.directive';\nimport { NbFormFieldControl, NbFormControlState, NbFormFieldControlConfig } from './form-field-control';\n\nexport type NbFormControlAddon = 'prefix' | 'suffix';\n\nfunction throwFormControlElementNotFound() {\n  throw new Error(`NbFormFieldComponent must contain [nbInput]`)\n}\n\n/*\n * NbFormFieldComponent\n *\n * @styles\n *\n * form-field-addon-basic-text-color:\n * form-field-addon-basic-highlight-text-color:\n * form-field-addon-primary-text-color:\n * form-field-addon-primary-highlight-text-color:\n * form-field-addon-success-text-color:\n * form-field-addon-success-highlight-text-color:\n * form-field-addon-info-text-color:\n * form-field-addon-info-highlight-text-color:\n * form-field-addon-warning-text-color:\n * form-field-addon-warning-highlight-text-color:\n * form-field-addon-danger-text-color:\n * form-field-addon-danger-highlight-text-color:\n * form-field-addon-control-text-color:\n * form-field-addon-control-highlight-text-color:\n * form-field-addon-disabled-text-color:\n * form-field-addon-tiny-height:\n * form-field-addon-tiny-width:\n * form-field-addon-tiny-icon-size:\n * form-field-addon-tiny-font-size:\n * form-field-addon-tiny-line-height:\n * form-field-addon-tiny-font-weight:\n * form-field-addon-small-height:\n * form-field-addon-small-width:\n * form-field-addon-small-icon-size:\n * form-field-addon-small-font-size:\n * form-field-addon-small-line-height:\n * form-field-addon-small-font-weight:\n * form-field-addon-medium-height:\n * form-field-addon-medium-width:\n * form-field-addon-medium-icon-size:\n * form-field-addon-medium-font-size:\n * form-field-addon-medium-line-height:\n * form-field-addon-medium-font-weight:\n * form-field-addon-large-height:\n * form-field-addon-large-width:\n * form-field-addon-large-icon-size:\n * form-field-addon-large-font-size:\n * form-field-addon-large-line-height:\n * form-field-addon-large-font-weight:\n * form-field-addon-giant-height:\n * form-field-addon-giant-width:\n * form-field-addon-giant-icon-size:\n * form-field-addon-giant-font-size:\n * form-field-addon-giant-line-height:\n * form-field-addon-giant-font-weight:\n **/\n@Component({\n  selector: 'nb-form-field',\n  styleUrls: ['./form-field.component.css'],\n  templateUrl: './form-field.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NbFormFieldComponent implements AfterContentChecked, AfterContentInit, AfterViewInit, OnDestroy {\n\n  protected readonly destroy$ = new Subject<void>();\n\n  protected formControlState$ = new ReplaySubject<NbFormControlState>(1);\n  prefixClasses$: Observable<string[]> = this.formControlState$.pipe(map(s => this.getAddonClasses('prefix', s)));\n  suffixClasses$: Observable<string[]> = this.formControlState$.pipe(map(s => this.getAddonClasses('suffix', s)));\n\n  @ContentChildren(NbPrefixDirective, { descendants: true }) prefix: QueryList<NbPrefixDirective>;\n  @ContentChildren(NbSuffixDirective, { descendants: true }) suffix: QueryList<NbSuffixDirective>;\n\n  @ContentChild(NbFormFieldControl, { static: false }) formControl: NbFormFieldControl;\n  @ContentChild(NbFormFieldControlConfig, { static: false }) formControlConfig: NbFormFieldControlConfig;\n\n  constructor(\n    protected cd: ChangeDetectorRef,\n    protected zone: NgZone,\n    protected elementRef: ElementRef,\n    protected renderer: Renderer2,\n  ) {\n  }\n\n  ngAfterContentChecked() {\n    if (!this.formControl) {\n      throwFormControlElementNotFound();\n    }\n  }\n\n  ngAfterContentInit() {\n    this.subscribeToFormControlStateChange();\n    this.subscribeToAddonChange();\n  }\n\n  ngAfterViewInit() {\n    // TODO: #2254\n    this.zone.runOutsideAngular(() => setTimeout(() => {\n      this.renderer.addClass(this.elementRef.nativeElement, 'nb-transition');\n    }));\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n  }\n\n  shouldShowPrefix(): boolean {\n    return this.getFormControlConfig().supportsPrefix && !!this.prefix.length;\n  }\n\n  shouldShowSuffix(): boolean {\n    return this.getFormControlConfig().supportsSuffix && !!this.suffix.length;\n  }\n\n  protected subscribeToFormControlStateChange() {\n    const { disabled$, focused$, size$, status$ } = this.formControl;\n\n    combineLatest([disabled$, focused$, size$, status$])\n      .pipe(\n        map(([disabled, focused, size, status]) => ({ disabled, focused, size, status })),\n        distinctUntilChanged((oldState, state) => this.isStatesEqual(oldState, state)),\n        takeUntil(this.destroy$),\n      )\n      .subscribe(this.formControlState$);\n  }\n\n  protected subscribeToAddonChange() {\n    merge(this.prefix.changes, this.suffix.changes)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => this.cd.markForCheck());\n  }\n\n  protected getAddonClasses(addon: NbFormControlAddon, state: NbFormControlState): string[] {\n    const classes = [\n      'nb-form-field-addon',\n      `nb-form-field-${addon}-${state.size}`,\n    ];\n\n    if (state.disabled) {\n      classes.push(`nb-form-field-addon-disabled`);\n    } else if (state.focused) {\n      classes.push(`nb-form-field-addon-${state.status}-highlight`);\n    } else {\n      classes.push(`nb-form-field-addon-${state.status}`);\n    }\n\n    return classes;\n  }\n\n  protected getFormControlConfig(): NbFormFieldControlConfig {\n    return this.formControlConfig || new NbFormFieldControlConfig();\n  }\n\n  protected isStatesEqual(oldState: NbFormControlState, state: NbFormControlState): boolean {\n    return oldState.status === state.status &&\n           oldState.disabled === state.disabled &&\n           oldState.focused === state.focused &&\n           oldState.size === state.size;\n  }\n}\n"]}