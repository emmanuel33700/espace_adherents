{"version":3,"file":"scroll.service.js","sourceRoot":"","sources":["../../../../../.ng_build/theme/services/scroll.service.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,UAAU,EAAE,OAAO,EAAc,MAAM,MAAM,CAAC;AACvD,OAAO,EAAE,KAAK,EAAE,MAAM,gBAAgB,CAAC;AAoBvC;;;;;;;;GAQG;AAEH,IAAa,qBAAqB,GAAlC,MAAa,qBAAqB;IAAlC;QAEU,uBAAkB,GAAG,IAAI,OAAO,EAAO,CAAC;QACxC,kBAAa,GAAG,IAAI,OAAO,EAAoB,CAAC;QAChD,YAAO,GAAG,IAAI,OAAO,EAAO,CAAC;QAC7B,gBAAW,GAAG,IAAI,OAAO,EAAW,CAAC;IAmE/C,CAAC;IAjEC;;;;OAIG;IACH,WAAW;QACT,OAAO,UAAU,CAAC,MAAM,CAAC,CAAC,QAAsC,EAAE,EAAE;YAClE,MAAM,QAAQ,GAAG,IAAI,OAAO,EAAoB,CAAC;YACjD,QAAQ,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;YAC7B,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;YAE3C,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;QACnC,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;;;OAKG;IACH,QAAQ,CAAC,IAAY,IAAI,EAAE,IAAY,IAAI;QACzC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IACpC,CAAC;IAED;;;;OAIG;IACH,QAAQ;QACN,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAO,CAAC,CAAC;IACzC,CAAC;IAED;;;OAGG;IACH,cAAc;QACZ,OAAO,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,EAAoB,CAAC,CAAC;IAC5D,CAAC;IAED;;;OAGG;IACH,aAAa;QACX,OAAO,IAAI,CAAC,kBAAkB,CAAC;IACjC,CAAC;IAED,kBAAkB;QAChB,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;IACxC,CAAC;IAED;;;OAGG;IACH,gBAAgB,CAAC,KAAU;QACzB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC3B,CAAC;IAED,UAAU,CAAC,UAAmB;QAC5B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACpC,CAAC;CACF,CAAA;AAxEY,qBAAqB;IADjC,UAAU,EAAE;GACA,qBAAqB,CAwEjC;SAxEY,qBAAqB","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable, Subject, Subscriber } from 'rxjs';\nimport { share } from 'rxjs/operators';\n\n/**\n * Scroll position type\n */\nexport interface NbScrollPosition {\n\n  /**\n   * x - left\n   * @type {number}\n   */\n  x: number;\n\n  /**\n   * y - top\n   * @type {number}\n   */\n  y: number;\n}\n\n/**\n * Layout scroll service. Provides information about current scroll position,\n * as well as methods to update position of the scroll.\n *\n * The reason we added this service is that in Nebular there are two scroll modes:\n * - the default mode when scroll is on body\n * - and the `withScroll` mode, when scroll is removed from the body and moved to an element inside of the\n * `nb-layout` component\n */\n@Injectable()\nexport class NbLayoutScrollService {\n\n  private scrollPositionReq$ = new Subject<any>();\n  private manualScroll$ = new Subject<NbScrollPosition>();\n  private scroll$ = new Subject<any>();\n  private scrollable$ = new Subject<boolean>();\n\n  /**\n   * Returns scroll position\n   *\n   * @returns {Observable<NbScrollPosition>}\n   */\n  getPosition(): Observable<NbScrollPosition> {\n    return Observable.create((observer: Subscriber<NbScrollPosition>) => {\n      const listener = new Subject<NbScrollPosition>();\n      listener.subscribe(observer);\n      this.scrollPositionReq$.next({ listener });\n\n      return () => listener.complete();\n    });\n  }\n\n  /**\n   * Sets scroll position\n   *\n   * @param {number} x\n   * @param {number} y\n   */\n  scrollTo(x: number = null, y: number = null) {\n    this.manualScroll$.next({ x, y });\n  }\n\n  /**\n   * Returns a stream of scroll events\n   *\n   * @returns {Observable<any>}\n   */\n  onScroll() {\n    return this.scroll$.pipe(share<any>());\n  }\n\n  /**\n   * @private\n   * @returns Observable<NbScrollPosition>.\n   */\n  onManualScroll(): Observable<NbScrollPosition> {\n    return this.manualScroll$.pipe(share<NbScrollPosition>());\n  }\n\n  /**\n   * @private\n   * @returns {Subject<any>}\n   */\n  onGetPosition(): Subject<any> {\n    return this.scrollPositionReq$;\n  }\n\n  onScrollableChange(): Observable<boolean> {\n    return this.scrollable$.pipe(share());\n  }\n\n  /**\n   * @private\n   * @param {any} event\n   */\n  fireScrollChange(event: any) {\n    this.scroll$.next(event);\n  }\n\n  scrollable(scrollable: boolean) {\n    this.scrollable$.next(scrollable);\n  }\n}\n"]}